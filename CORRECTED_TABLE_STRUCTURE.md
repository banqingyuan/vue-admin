# 修正后的队列分析表格

## 🎯 完全对应您的需求

我已经重新实现了队列分析表格，现在完全符合您提供的表格结构：

### 📊 表格结构

| 分析月份 | 用户群体 | 注册设备数 | 订单数 | 订单金额 | 新用户付费率<br/>老用户续费率 | 付费占比 |
| --- | --- | --- | --- | --- | --- | --- |
| **6月付费拆解** | 新用户<br/>(6月注册) | 1,500 | 450 | 67,500 | 30.0% | 25.2% |
|  | 老用户<br/>(5月注册) |  | 320 | 48,000 | 64.0% | 18.0% |
| **7月付费拆解** | 新用户<br/>(7月注册) | 1,800 | 540 | 81,000 | 30.0% | 28.5% |
|  | 老用户<br/>(6月注册) |  | 280 | 42,000 | 56.0% | 14.8% |
| **8月付费拆解** | 新用户<br/>(8月注册) | 2,100 | 630 | 94,500 | 30.0% | 31.5% |
|  | 老用户<br/>(7月注册) |  | 350 | 52,500 | 58.3% | 17.5% |
|  | 老用户<br/>(6月注册) |  | 200 | 30,000 | 40.0% | 10.0% |
|  | 老用户<br/>(5月注册) |  | 150 | 22,500 | 30.0% | 7.5% |

## ✅ 关键特征

### 1. 行结构

- **分析月份**: 6月付费拆解、7月付费拆解、8月付费拆解
- **用户分群**: 每个月包含新用户和多个老用户群体

### 2. 列结构

- **注册设备数**: 只有新用户显示，老用户为空
- **订单数**: 所有用户群体都显示
- **订单金额**: 所有用户群体都显示
- **付费率**: 新用户显示"付费率"，老用户显示"续费率"
- **付费占比**: 所有用户群体都显示

### 3. 视觉特征

- **黄色背景**: 注册设备数列
- **绿色背景**: 付费率/续费率列
- **颜色区分**: 新用户(绿色文字)，老用户(紫色文字)

## 🔧 技术实现

### 数据结构

```typescript
interface CohortTableRow {
  analysisMonth: string; // "6月付费拆解" 或 ""
  userGroup: string; // "新用户\n(6月注册)"
  registrationCount: string; // "1,500" 或 ""
  orderCount: string; // "450"
  orderAmount: string; // "67,500"
  newUserPaymentRate: string; // "30.0%"
  revenueShare: string; // "25.2%"
}
```

### 模拟数据

完全按照您的表格结构生成了 8 行数据：

- 3 行新用户数据（6月、7月、8月）
- 5 行老用户数据（不同注册月份的用户在不同分析月份的表现）

### 样式特性

- ✅ 支持换行显示（用户群体、表头）
- ✅ 黄色背景（注册设备数）
- ✅ 绿色背景（付费率/续费率）
- ✅ 颜色区分用户类型
- ✅ 居中对齐
- ✅ 固定左侧列

## 🚀 访问方式

1. **前端服务**: http://localhost:5667/
2. **付费数据页面**: http://localhost:5667/data-board/payment
3. **表格位置**: 页面底部的"用户队列分析"卡片

## 📝 与您需求的对比

| 需求项        | 实现状态 | 说明                                         |
| ------------- | -------- | -------------------------------------------- |
| 6月付费拆解   | ✅       | 包含6月新用户和5月老用户                     |
| 7月付费拆解   | ✅       | 包含7月新用户和6月老用户                     |
| 8月付费拆解   | ✅       | 包含8月新用户和7月、6月、5月老用户           |
| 注册设备数    | ✅       | 只在新用户行显示，黄色背景                   |
| 订单数/金额   | ✅       | 所有行都显示                                 |
| 付费率/续费率 | ✅       | 绿色背景，新用户显示付费率，老用户显示续费率 |
| 付费占比      | ✅       | 所有行都显示                                 |
| 颜色编码      | ✅       | 完全按照您的表格颜色方案                     |

现在这个表格应该完全符合您的需求了！请测试一下效果。
